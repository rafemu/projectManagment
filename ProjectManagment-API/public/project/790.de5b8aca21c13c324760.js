(self.webpackChunkmaterialpro=self.webpackChunkmaterialpro||[]).push([[790],{3790:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ProjectsModule:()=>_e});var o=i(1116),a=i(4258),n=i(3333),c=i(2251),r=i(5959),l=i(9258),s=i(5366),d=i(5416);const u=s.GuJ,p=Symbol("__destroy"),m=Symbol("__decoratorApplied");function g(t){return"string"==typeof t?Symbol(`__destroy__${t}`):p}function f(t,e){t[e]||(t[e]=new r.xQ)}function Z(t,e){t[e]&&(t[e].next(),t[e].complete(),t[e]=null)}function h(t){t instanceof l.w&&t.unsubscribe()}function A(t,e){return function(){var i,o;if(t&&t.call(this),Z(this,g()),e.arrayName)return o=this[e.arrayName],void(Array.isArray(o)&&o.forEach(h));if(e.checkProperties)for(const t in this)(null===(i=e.blackList)||void 0===i?void 0:i.includes(t))||h(this[t])}}function q(t={}){return e=>{e[u]?function(t,e){const i=t.\u0275pipe;i.onDestroy=A(i.onDestroy,e)}(e,t):function(t,e){t.prototype.ngOnDestroy=A(t.prototype.ngOnDestroy,e)}(e,t),function(t){t.prototype[m]=!0}(e)}}function x(t,e){return i=>{const o=g(e);return"string"==typeof e?function(t,e,i){const o=t[e];f(t,i),t[e]=function(){o.apply(this,arguments),Z(this,i),t[e]=o}}(t,e,o):f(t,o),i.pipe((0,d.R)(t[o]))}}var T=i(5965),v=i(2797),j=i(2281),b=i(2935),y=i(4369);let _=(()=>{class t{constructor(t,e,i){this.datePipe=t,this.dialogRef=e,this.data=i,this.imgPath=j.x;const o=i.agreement?i.agreement:i.checksImgPath.replace("images/","");this.local_data=o}ngOnInit(){}closeDialog(){this.dialogRef.close({event:"Cancel"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.uU),s.Y36(b.so),s.Y36(b.WI,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-image-view"]],decls:8,vars:2,consts:[["mat-dialog-title","",1,"font-medium"],[1,"pb-3"],[3,"src"],["mat-dialog-actions","","align","end",1,"pt-3"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"h2",0),s.TgZ(1,"strong"),s._uU(2),s.qZA(),s.qZA(),s.TgZ(3,"mat-dialog-content",1),s._UZ(4,"img",2),s.TgZ(5,"div",3),s.TgZ(6,"button",4),s.NdJ("click",function(){return e.closeDialog()}),s._uU(7,"Cancel"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Oqu(e.local_data.projectName),s.xp6(2),s.Q6J("src",e.imgPath+"/"+e.local_data,s.LSH))},directives:[b.uh,b.xY,b.H8,y.lW],styles:[""]}),t})();var w=i(1041),N=i(3070),U=i(9550);function P(t,e){if(1&t&&(s.TgZ(0,"span",17),s._uU(1),s.qZA()),2&t){const t=s.oxw(2);s.xp6(1),s.Oqu(t.fileError)}}function D(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-dialog-content",3),s.TgZ(1,"form",4),s.TgZ(2,"div",5),s.TgZ(3,"div",6),s.TgZ(4,"div",7),s.TgZ(5,"mat-form-field"),s._UZ(6,"input",8),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",9),s._uU(8," quotation photo "),s._UZ(9,"img",10),s.TgZ(10,"button",11),s.TgZ(11,"input",12),s.NdJ("change",function(e){return s.CHM(t),s.oxw().onSelectFile(e)}),s.qZA(),s.qZA(),s.YNc(12,P,2,1,"span",13),s.qZA(),s.TgZ(13,"div",6),s.TgZ(14,"div",7),s.TgZ(15,"mat-form-field"),s._UZ(16,"input",14),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"button",15),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(18),s.qZA(),s.TgZ(19,"button",16),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(20,"Cancel"),s.qZA(),s.qZA(),s._UZ(21,"div"),s.qZA()}if(2&t){const t=s.oxw();s.xp6(1),s.Q6J("formGroup",t.form),s.xp6(8),s.Q6J("src",null==t.projectdData?null:t.projectdData.agreement,s.LSH),s.xp6(3),s.Q6J("ngIf",t.fileError),s.xp6(5),s.Q6J("disabled",!t.form.valid),s.xp6(1),s.hij(" ",t.action," ")}}function k(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"p"),s._uU(1,"Sure to delete "),s._UZ(2,"b"),s._uU(3," ?"),s.qZA(),s.TgZ(4,"div",18),s.TgZ(5,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(6),s.qZA(),s.TgZ(7,"button",16),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(8,"Cancel"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(6),s.hij(" ",t.action," ")}}let Y=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.formBuilder=e,this.data=i,this.fileError="",this.projectdData=i,this.projectdData.agreement=null===this.projectdData.agreement||"Add"==this.action?"/assets/images/default-placeholder-150x150.png":j.x+"/"+this.projectdData.agreement.replace("images/","")}ngOnInit(){this.action=this.projectdData.action,this.initForm(),"Update"===this.projectdData.action&&this.filForm()}initForm(){this.form=this.formBuilder.group({quotation:new w.NI("",{validators:[w.kI.required]}),notes:new w.NI("")})}filForm(){this.form.setValue({quotation:this.projectdData.quotation,notes:this.projectdData.quotationNotes})}doAction(){const{quotation:t,notes:e}=this.form.value;this.form.invalids||this.dialogRef.close({event:this.action,data:{projectId:this.projectdData.id,quotation:t,notes:e,imagePath:this.selectedImg}})}onSelectFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=()=>{t.target.files[0].name.match(/.(jpg|jpeg|png|gif|pdf)$/i)?t.target.files[0].size>1572864?this.fileError="image should not be more than 1.5mb":(this.selectedImg=t.target.files[0],this.projectdData.agreement=e.result):this.fileError="image should be JPG|JPEG|PNG|GIF|pdf"}}}closeDialog(){this.dialogRef.close({event:"Cancel"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(b.so),s.Y36(w.qu),s.Y36(b.WI,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-quotation-action"]],decls:6,vars:3,consts:[["mat-dialog-title","",1,"font-medium"],["class","pb-3 mat-typography","style","width: 500px",4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"pb-3","mat-typography",2,"width","500px"],[3,"formGroup"],["fxLayout","row wrap",1,"align-items-center"],["fxFlex","100","fxFlex.gt-md","100"],[1,"m-r-15","m-l-15"],["matInput","","type","number","name","quotation","formControlName","quotation","placeholder","quotation"],[1,"d-flex","align-items-center","m-b-15"],[1,"mat-card-avatar",3,"src"],["mat-raised-button","","color","primary",1,"m-l-15","input-file-button"],["type","file",3,"change"],["class","bg-danger p-10 text-white",4,"ngIf"],["matInput","","type","text","name","notes","formControlName","notes","placeholder"," Notes"],["mat-button","","mat-flat-button","","color","warn",3,"disabled","click"],["mat-button","",3,"click"],[1,"bg-danger","p-10","text-white"],["mat-dialog-actions","","align","end",1,"pt-3"],["mat-button","","mat-flat-button","","color","warn",3,"click"]],template:function(t,e){if(1&t&&(s.TgZ(0,"h2",0),s.TgZ(1,"strong"),s._uU(2),s.qZA(),s.qZA(),s.YNc(3,D,22,5,"mat-dialog-content",1),s.YNc(4,k,9,1,"ng-template",null,2,s.W1O)),2&t){const t=s.MAs(5);s.xp6(2),s.hij("",e.action," Quotation"),s.xp6(1),s.Q6J("ngIf","Delete"!=e.action)("ngIfElse",t)}},directives:[b.uh,o.O5,b.xY,w._Y,w.JL,w.sg,T.xw,T.yH,N.KE,U.Nt,w.wV,w.Fj,w.JJ,w.u,y.lW,b.H8],styles:[""]}),t})();var C=i(580);function I(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"a",10),s.NdJ("click",function(){s.CHM(t);const e=s.oxw();return e.openDialog("Add",e.project)}),s._UZ(1,"i",11),s.qZA()}}function J(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"a",10),s.NdJ("click",function(){s.CHM(t);const e=s.oxw();return e.openDialog("Update",e.project)}),s._UZ(1,"i",12),s.qZA()}}let F=(()=>{class t{constructor(t,e){this.dialog=t,this.projectServices=e}ngOnInit(){}openDialog(t,e){e.action=t,this.dialog.open(Y,{data:this.project,disableClose:!0}).afterClosed().subscribe(t=>{void 0!==t&&("Add"===t.event?this.projectServices.addProjectQuotation(t.data).subscribe(t=>{}):"Update"===t.event&&this.projectServices.updateQuotation(t.data).subscribe(t=>{}))})}openAgreement(t){this.dialog.open(_,{data:t,disableClose:!0}).afterClosed().subscribe(t=>{})}ngOnChanges(){this.project.agreement="undefined"===this.project.agreement?"/assets/images/default-placeholder-150x150.png":j.x+"/"+this.project.agreement.replace("images/","")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(b.uw),s.Y36(n.m))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-project-details"]],inputs:{project:"project"},features:[s.TTD],decls:64,vars:31,consts:[["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[1,"social-widget"],[1,"soc-header","box-twitter"],["fxLayout","row","fxLayoutWrap","wrap",1,"text-center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",1,"p-20","b-r"],[1,"font-medium","m-0"],[1,"text-muted"],[1,"mat-card-avatar",3,"src","click"],["fxFlex.gt-sm","50","fxFlex.gt-xs","50",1,"p-20"],["class","m-r-10 cursor-pointer",3,"click",4,"ngIf"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"fa","fa-plus","text-info"],[1,"fa","fa-pencil"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-card"),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s._uU(4),s.qZA(),s.TgZ(5,"div",3),s.TgZ(6,"div",4),s.TgZ(7,"h3",5),s._uU(8,"client Full Name"),s.qZA(),s.TgZ(9,"span",6),s._uU(10),s.qZA(),s.qZA(),s.TgZ(11,"div",4),s.TgZ(12,"h3",5),s._uU(13,"client Phone"),s.qZA(),s.TgZ(14,"span",6),s._uU(15),s.qZA(),s.qZA(),s.TgZ(16,"div",4),s.TgZ(17,"h3",5),s._uU(18,"location"),s.qZA(),s.TgZ(19,"span",6),s._uU(20),s.qZA(),s.qZA(),s.TgZ(21,"div",4),s.TgZ(22,"h3",5),s._uU(23,"agreement"),s.qZA(),s.TgZ(24,"img",7),s.NdJ("click",function(){return e.openAgreement(e.project)}),s.qZA(),s.qZA(),s.TgZ(25,"div",8),s.TgZ(26,"h3",5),s._uU(27,"create dAt"),s.qZA(),s.TgZ(28,"span",6),s._uU(29),s.ALo(30,"momentPipe"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(31,"div",3),s.TgZ(32,"div",4),s.TgZ(33,"h3",5),s._uU(34,"quotation"),s.qZA(),s.TgZ(35,"span",6),s._uU(36),s.ALo(37,"currency"),s.qZA(),s._UZ(38,"br"),s.YNc(39,I,2,0,"a",9),s.YNc(40,J,2,0,"a",9),s.qZA(),s.TgZ(41,"div",4),s.TgZ(42,"h3",5),s._uU(43,"paid"),s.qZA(),s.TgZ(44,"span",6),s._uU(45),s.ALo(46,"currency"),s.qZA(),s.qZA(),s.TgZ(47,"div",4),s.TgZ(48,"h3",5),s._uU(49,"unPaid"),s.qZA(),s.TgZ(50,"span",6),s._uU(51),s.ALo(52,"currency"),s.qZA(),s.qZA(),s.TgZ(53,"div",4),s.TgZ(54,"h3",5),s._uU(55,"haregem"),s.qZA(),s.TgZ(56,"span",6),s._uU(57),s.qZA(),s.qZA(),s.TgZ(58,"div",8),s.TgZ(59,"h3",5),s._uU(60,"updated dAt"),s.qZA(),s.TgZ(61,"span",6),s._uU(62),s.ALo(63,"momentPipe"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.hij(" ",null==e.project?null:e.project.projectName," "),s.xp6(6),s.Oqu(null==e.project?null:e.project.clientFullName),s.xp6(5),s.Oqu(null==e.project?null:e.project.clientPhone),s.xp6(5),s.Oqu(null==e.project?null:e.project.location),s.xp6(4),s.Q6J("src",null==e.project?null:e.project.agreement,s.LSH),s.xp6(5),s.Oqu(s.xi3(30,13,null==e.project?null:e.project.createdAt,"YYYY-MM-DD")),s.xp6(7),s.Oqu(s.Dn7(37,16,null==e.project?null:e.project.quotation,"ILS","symbol")),s.xp6(3),s.Q6J("ngIf",!(null!=e.project&&e.project.quotation)),s.xp6(1),s.Q6J("ngIf",null==e.project?null:e.project.quotation),s.xp6(5),s.Oqu(s.Dn7(46,20,null==e.project?null:e.project.paid,"ILS","symbol")),s.xp6(6),s.Oqu(s.Dn7(52,24,(null==e.project?null:e.project.quotation)-(null==e.project?null:e.project.paid),"ILS","symbol")),s.xp6(6),s.Oqu(null==e.project?null:e.project.haregem),s.xp6(5),s.Oqu(s.xi3(63,28,null==e.project?null:e.project.updatedAt,"YYYY-MM-DD")))},directives:[T.yH,v.a8,T.xw,o.O5],pipes:[C.d,o.H9],styles:[""]}),t})();var S=i(5609),Q=i(9241),H=i(7340),O=i(9609),M=i(9024),L=i(3841),E=i(7064);function B(t,e){if(1&t&&(s.TgZ(0,"mat-option",20),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t.value),s.xp6(1),s.hij(" ",t.viewValue," ")}}function R(t,e){if(1&t&&(s.TgZ(0,"span",26),s._uU(1),s.qZA()),2&t){const t=s.oxw(3);s.xp6(1),s.Oqu(t.fileError)}}function $(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",21),s._uU(1," CheckImg "),s._UZ(2,"img",22),s.TgZ(3,"button",23),s.TgZ(4,"input",24),s.NdJ("change",function(e){return s.CHM(t),s.oxw(2).onSelectFile(e)}),s.qZA(),s.qZA(),s.YNc(5,R,2,1,"span",25),s.qZA()}if(2&t){const t=s.oxw(2);s.xp6(2),s.Q6J("src",t.recordData.checksImgPath,s.LSH),s.xp6(3),s.Q6J("ngIf",t.fileError)}}function G(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-dialog-content",3),s.TgZ(1,"form",4),s.TgZ(2,"div",5),s.TgZ(3,"div",6),s.TgZ(4,"div",7),s.TgZ(5,"mat-form-field",8),s.TgZ(6,"mat-label"),s._uU(7,"Paid At"),s.qZA(),s._UZ(8,"input",9),s._UZ(9,"mat-datepicker-toggle",10),s._UZ(10,"mat-datepicker",null,11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",12),s.TgZ(13,"div",7),s.TgZ(14,"mat-form-field"),s._UZ(15,"input",13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",12),s.TgZ(17,"div",7),s.TgZ(18,"mat-form-field"),s.TgZ(19,"mat-select",14),s.NdJ("selectionChange",function(e){return s.CHM(t),s.oxw().selectMethod(e)}),s.YNc(20,B,2,2,"mat-option",15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(21,$,6,2,"div",16),s.TgZ(22,"div",12),s.TgZ(23,"div",7),s.TgZ(24,"mat-form-field"),s._UZ(25,"input",17),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(26,"button",18),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(27),s.qZA(),s.TgZ(28,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(29,"Cancel"),s.qZA(),s.qZA(),s._UZ(30,"div"),s.qZA()}if(2&t){const t=s.MAs(11),e=s.oxw();s.xp6(1),s.Q6J("formGroup",e.form),s.xp6(7),s.Q6J("matDatepicker",t),s.xp6(1),s.Q6J("for",t),s.xp6(11),s.Q6J("ngForOf",e.methods),s.xp6(1),s.Q6J("ngIf",e.isShow),s.xp6(5),s.Q6J("disabled",!e.form.valid),s.xp6(1),s.hij(" ",e.action," ")}}function W(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"p"),s._uU(1,"Sure to delete "),s._UZ(2,"b"),s._uU(3," ?"),s.qZA(),s.TgZ(4,"div",27),s.TgZ(5,"button",28),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(6),s.qZA(),s.TgZ(7,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(8,"Cancel"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(6),s.Oqu(t.action)}}let z=(()=>{class t{constructor(t,e,i){this.formBuilder=t,this.dialogRef=e,this.data=i,this.fileError="",this.isShow=!1,this.methods=[{value:"cash",viewValue:"Cash"},{value:"check",viewValue:"Check"}],this.paidDate=new Date,this.recordData=Object.assign({},i),this.action=this.recordData.action,this.recordData.checksImgPath=null===this.recordData.checksImgPath||"Add"==this.action?"/assets/images/default-placeholder-150x150.png":j.x+"/"+this.recordData.checksImgPath.replace("images/","")}ngOnInit(){this.initForm(),"Update"===this.recordData.action&&this.filForm()}doAction(){const{paiddate:t,paid:e,method:i,notes:o}=this.form.value,a={paidDate:O(t).format("YYYY-MM-DD HH:mm:ss"),projectId:this.recordData.projectId,paid:e,method:i,notes:o,checkImg:this.imagePath,createdAt:O().format("YYYY-MM-DD")};this.form.invalids||this.dialogRef.close({event:this.action,data:a})}initForm(){this.form=this.formBuilder.group({paiddate:new w.NI(this.paidDate,{validators:[w.kI.required]}),paid:new w.NI("",{validators:[w.kI.required]}),method:new w.NI("cash",{validators:[w.kI.required]}),notes:new w.NI("")})}filForm(){this.form.setValue({paiddate:this.recordData.paidDate,paid:this.recordData.paid,method:this.recordData.method,notes:this.recordData.notes}),"check"==this.recordData.method&&(this.isShow=!0)}selectMethod(t){this.isShow="check"==t.value}onSelectFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=()=>{t.target.files[0].name.match(/.(jpg|jpeg|png|gif|pdf)$/i)?t.target.files[0].size>1572864||(this.imagePath=t.target.files[0],this.recordData.checksImgPath=e.result):this.fileError="image should be JPG|JPEG|PNG|GIF|pdf"}}}closeDialog(){this.dialogRef.close({event:"Cancel"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(w.qu),s.Y36(b.so),s.Y36(b.WI,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-add-paids"]],decls:6,vars:3,consts:[["mat-dialog-title","",1,"font-medium"],["class","pb-3 mat-typography","style","width: 500px",4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"pb-3","mat-typography",2,"width","500px"],[3,"formGroup"],["fxLayout","row wrap",1,"align-items-center"],["fxFlex","100","fxFlex.gt-md","50"],[1,"m-r-15","m-l-15"],["appearance","fill"],["matInput","","formControlName","paiddate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["fxFlex","100","fxFlex.gt-md","100"],["matInput","","type","number","name","paid","formControlName","paid","placeholder","Paid"],["name","method","formControlName","method","placeholder","Method","id","method",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex align-items-center m-b-15",4,"ngIf"],["matInput","","type","text","name","notes","formControlName","notes","placeholder"," Notes"],["mat-button","","mat-flat-button","","color","warn",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[1,"d-flex","align-items-center","m-b-15"],[1,"mat-card-avatar",3,"src"],["mat-raised-button","","color","primary",1,"m-l-15","input-file-button"],["type","file",3,"change"],["class","bg-danger p-10 text-white",4,"ngIf"],[1,"bg-danger","p-10","text-white"],["mat-dialog-actions","","align","end",1,"pt-3"],["mat-button","","mat-flat-button","","color","warn",3,"click"]],template:function(t,e){if(1&t&&(s.TgZ(0,"h2",0),s.TgZ(1,"strong"),s._uU(2),s.qZA(),s.qZA(),s.YNc(3,G,31,7,"mat-dialog-content",1),s.YNc(4,W,9,1,"ng-template",null,2,s.W1O)),2&t){const t=s.MAs(5);s.xp6(2),s.hij("",e.action," Paid"),s.xp6(1),s.Q6J("ngIf","Delete"!=e.action)("ngIfElse",t)}},directives:[b.uh,o.O5,b.xY,w._Y,w.JL,w.sg,T.xw,T.yH,N.KE,N.hX,U.Nt,w.Fj,M.hl,w.JJ,w.u,M.nW,N.R9,M.Mq,w.wV,L.gD,o.sg,y.lW,E.ey,b.H8],styles:[""]}),t})();function X(t,e){1&t&&(s.TgZ(0,"th",16),s._uU(1," # "),s.qZA())}function V(t,e){if(1&t&&(s.TgZ(0,"td",17),s._uU(1),s.qZA()),2&t){const t=e.index;s.xp6(1),s.hij(" ",t+1," ")}}function K(t,e){1&t&&(s.TgZ(0,"th",16),s._uU(1," Date "),s.qZA())}function tt(t,e){if(1&t&&(s.TgZ(0,"td",17),s._uU(1),s.ALo(2,"momentPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,null==t?null:t.paidDate,"YYYY-MM-DD")," ")}}function et(t,e){1&t&&(s.TgZ(0,"th",16),s._uU(1," method "),s.qZA())}function it(t,e){if(1&t&&(s.TgZ(0,"td",17),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",null==t?null:t.method," ")}}function ot(t,e){1&t&&(s.TgZ(0,"th",16),s._uU(1," paid"),s.qZA())}function at(t,e){if(1&t&&(s.TgZ(0,"td",17),s.TgZ(1,"div",18),s.TgZ(2,"div",19),s.TgZ(3,"p",20),s._uU(4),s.ALo(5,"currency"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(4),s.Oqu(s.Dn7(5,1,null==t?null:t.paid,"ILS","symbol"))}}function nt(t,e){1&t&&(s.TgZ(0,"th",16),s._uU(1," img check "),s.qZA())}function ct(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"img",22),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().openAgreement(e)}),s.qZA()}if(2&t){const t=s.oxw().$implicit,e=s.oxw();s.Q6J("src",e.imgPath+"/"+t.checksImgPath.replace("images/",""),s.LSH)}}function rt(t,e){if(1&t&&(s.TgZ(0,"td",17),s.YNc(1,ct,1,1,"img",21),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Q6J("ngIf",t.checksImgPath)}}function lt(t,e){1&t&&(s.TgZ(0,"th",16),s._uU(1," Action "),s.qZA())}function st(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"td",23),s.TgZ(1,"a",24),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openDialog("Update",e)}),s._UZ(2,"i",25),s.qZA(),s.TgZ(3,"a",24),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openDialog("Delete",e)}),s._UZ(4,"i",26),s.qZA(),s.qZA()}}function dt(t,e){1&t&&s._UZ(0,"tr",27)}function ut(t,e){1&t&&s._UZ(0,"tr",28)}let pt=(()=>{class t{constructor(t){this.dialog=t,this.AddPaidsEvent=new s.vpe,this.UpdatePaidsEvent=new s.vpe,this.DeletePaidsEvent=new s.vpe,this.imgPath=j.x,this.paginator=Object.create(null),this.sort=Object.create(null),this.displayedColumns=["id","date","paid","notes","checkImg","action"]}ngOnInit(){}openDialog(t,e){e.action=t,this.dialog.open(z,{data:e,disableClose:!0}).afterClosed().subscribe(t=>{void 0!==t&&("Add"===t.event?this.AddPaidsEvent.emit(t.data):"Update"===t.event?this.UpdatePaidsEvent.emit({data:t.data,id:e.id}):"Delete"===t.event&&this.DeletePaidsEvent.emit(e.id))})}openAgreement(t){this.dialog.open(_,{data:t,disableClose:!0}).afterClosed().subscribe(t=>{})}ngOnChanges(){var t;this.dataSource=new H.by(null===(t=this.projectPiads)||void 0===t?void 0:t.paids)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(b.uw))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-paids-details"]],viewQuery:function(t,e){if(1&t&&(s.Gf(S.NW,7),s.Gf(Q.YE,7)),2&t){let t;s.iGM(t=s.CRH())&&(e.paginator=t.first),s.iGM(t=s.CRH())&&(e.sort=t.first)}},inputs:{projectPiads:"projectPiads"},outputs:{AddPaidsEvent:"AddPaidsEvent",UpdatePaidsEvent:"UpdatePaidsEvent",DeletePaidsEvent:"DeletePaidsEvent"},features:[s.TTD],decls:30,vars:3,consts:[["fxLayout","row wrap"],["fxFlex","100"],["mat-raised-button","","color","primary",3,"click"],[1,"table-responsive"],["mat-table","",1,"table","employee-list","no-wrap",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","notes"],["matColumnDef","paid"],["matColumnDef","checkImg"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["color","#26c6da","size","24px","mat-row","",3,"BoldLine",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[1,"m-l-15"],[1,"font-bold","m-b-0","m-t-0"],["class","mat-card-avatar",3,"src","click",4,"ngIf"],[1,"mat-card-avatar",3,"src","click"],["mat-cell","",1,"action-link"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash","text-danger"],["mat-header-row",""],["color","#26c6da","size","24px","mat-row","",3,"BoldLine"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"mat-card"),s.TgZ(3,"mat-card-header"),s.TgZ(4,"div",0),s.TgZ(5,"button",2),s.NdJ("click",function(){return e.openDialog("Add",{})}),s._uU(6,"Add Paid"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"mat-card-content"),s.TgZ(8,"div",3),s.TgZ(9,"table",4),s.ynx(10,5),s.YNc(11,X,2,0,"th",6),s.YNc(12,V,2,1,"td",7),s.BQk(),s.ynx(13,8),s.YNc(14,K,2,0,"th",6),s.YNc(15,tt,3,4,"td",7),s.BQk(),s.ynx(16,9),s.YNc(17,et,2,0,"th",6),s.YNc(18,it,2,1,"td",7),s.BQk(),s.ynx(19,10),s.YNc(20,ot,2,0,"th",6),s.YNc(21,at,6,5,"td",7),s.BQk(),s.ynx(22,11),s.YNc(23,nt,2,0,"th",6),s.YNc(24,rt,2,1,"td",7),s.BQk(),s.ynx(25,12),s.YNc(26,lt,2,0,"th",6),s.YNc(27,st,5,0,"td",13),s.BQk(),s.YNc(28,dt,1,0,"tr",14),s.YNc(29,ut,1,0,"tr",15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(9),s.Q6J("dataSource",e.dataSource),s.xp6(19),s.Q6J("matHeaderRowDef",e.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",e.displayedColumns))},directives:[T.xw,T.yH,v.a8,v.dk,y.lW,v.dn,H.BZ,H.w1,H.fO,H.Dz,H.as,H.nj,H.ge,H.ev,o.O5,H.XQ,H.Gk],pipes:[C.d,o.H9],styles:[""]}),t})();var mt=i(552);function gt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," # "),s.qZA())}function ft(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.qZA()),2&t){const t=e.index;s.xp6(1),s.hij(" ",t+1," ")}}function Zt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," Date "),s.qZA())}function ht(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.ALo(2,"momentPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,null==t?null:t.date,"YYYY-MM-DD")," ")}}function At(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," day "),s.qZA())}function qt(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.ALo(2,"momentPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,null==t?null:t.date," dddd")," ")}}function xt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," full Name "),s.qZA())}function Tt(t,e){if(1&t&&(s.TgZ(0,"td",22),s.TgZ(1,"div",23),s.TgZ(2,"div",24),s.TgZ(3,"p",25),s._uU(4),s.qZA(),s.TgZ(5,"small"),s._uU(6),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(4),s.Oqu(null==t?null:t.firstName),s.xp6(2),s.Oqu(t.lastName)}}function vt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," start At "),s.qZA())}function jt(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.ALo(2,"momentPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,null==t?null:t.startAt,"HH:mm")," ")}}function bt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1,"endAt "),s.qZA())}function yt(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.ALo(2,"momentPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,null==t?null:t.endAt,"HH:mm")," ")}}function _t(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," project Name "),s.qZA())}function wt(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.ALo(2,"ProjectPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.lcZ(2,1,null==t?null:t.dayWorkedPlace)," ")}}function Nt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," duration "),s.qZA())}function Ut(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",null==t?null:t.duration," ")}}function Pt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," daily wage "),s.qZA())}function Dt(t,e){if(1&t&&(s.TgZ(0,"td",22),s.TgZ(1,"div",23),s.TgZ(2,"div",24),s.TgZ(3,"p",25),s._uU(4),s.ALo(5,"currency"),s.qZA(),s.TgZ(6,"small"),s._uU(7,"wage From "),s.qZA(),s.TgZ(8,"small"),s._uU(9),s.ALo(10,"momentPipe"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(4),s.Oqu(s.Dn7(5,2,null==t?null:t.dailyWage,"ILS","symbol")),s.xp6(5),s.Oqu(s.xi3(10,6,t.wageFrom,"YYYY-MM"))}}function kt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," notes "),s.qZA())}function Yt(t,e){if(1&t&&(s.TgZ(0,"td",22),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",null==t?null:t.notes," ")}}function Ct(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," Pay Per Day"),s.qZA())}function It(t,e){if(1&t&&(s.TgZ(0,"td",22),s.TgZ(1,"div",23),s.TgZ(2,"div",24),s.TgZ(3,"p",25),s._uU(4),s.ALo(5,"currency"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(4),s.Oqu(s.Dn7(5,1,null==t?null:t.payPerDay,"ILS","symbol"))}}function Jt(t,e){1&t&&(s.TgZ(0,"th",21),s._uU(1," Action "),s.qZA())}function Ft(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"td",26),s.TgZ(1,"a",27),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openDialog("Update",e)}),s._UZ(2,"i",28),s.qZA(),s.TgZ(3,"a",27),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openDialog("Delete",e)}),s._UZ(4,"i",29),s.qZA(),s.qZA()}}function St(t,e){1&t&&s._UZ(0,"tr",30)}function Qt(t,e){1&t&&s._UZ(0,"tr",31)}let Ht=(()=>{class t{constructor(){this.paginator=Object.create(null),this.sort=Object.create(null),this.displayedColumns=["id","date","day","firstName","projectName","startAt","endAt","duration","dailyWage","payPerDay","notes"]}ngOnInit(){}ngOnChanges(){this.dataSource=new H.by(this.recordsByProject)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-employee-worked-days"]],viewQuery:function(t,e){if(1&t&&(s.Gf(S.NW,7),s.Gf(Q.YE,7)),2&t){let t;s.iGM(t=s.CRH())&&(e.paginator=t.first),s.iGM(t=s.CRH())&&(e.sort=t.first)}},inputs:{recordsByProject:"recordsByProject"},features:[s.TTD],decls:44,vars:3,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"table-responsive"],["mat-table","",1,"table","employee-list","no-wrap",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","day"],["matColumnDef","firstName"],["matColumnDef","startAt"],["matColumnDef","endAt"],["matColumnDef","projectName"],["matColumnDef","duration"],["matColumnDef","dailyWage"],["matColumnDef","notes"],["matColumnDef","payPerDay"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["color","#26c6da","size","24px","mat-row","",3,"BoldLine",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[1,"m-l-15"],[1,"font-bold","m-b-0","m-t-0"],["mat-cell","",1,"action-link"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash","text-danger"],["mat-header-row",""],["color","#26c6da","size","24px","mat-row","",3,"BoldLine"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"mat-card"),s.TgZ(3,"mat-card-content"),s.TgZ(4,"div",2),s.TgZ(5,"table",3),s.ynx(6,4),s.YNc(7,gt,2,0,"th",5),s.YNc(8,ft,2,1,"td",6),s.BQk(),s.ynx(9,7),s.YNc(10,Zt,2,0,"th",5),s.YNc(11,ht,3,4,"td",6),s.BQk(),s.ynx(12,8),s.YNc(13,At,2,0,"th",5),s.YNc(14,qt,3,4,"td",6),s.BQk(),s.ynx(15,9),s.YNc(16,xt,2,0,"th",5),s.YNc(17,Tt,7,2,"td",6),s.BQk(),s.ynx(18,10),s.YNc(19,vt,2,0,"th",5),s.YNc(20,jt,3,4,"td",6),s.BQk(),s.ynx(21,11),s.YNc(22,bt,2,0,"th",5),s.YNc(23,yt,3,4,"td",6),s.BQk(),s.ynx(24,12),s.YNc(25,_t,2,0,"th",5),s.YNc(26,wt,3,3,"td",6),s.BQk(),s.ynx(27,13),s.YNc(28,Nt,2,0,"th",5),s.YNc(29,Ut,2,1,"td",6),s.BQk(),s.ynx(30,14),s.YNc(31,Pt,2,0,"th",5),s.YNc(32,Dt,11,9,"td",6),s.BQk(),s.ynx(33,15),s.YNc(34,kt,2,0,"th",5),s.YNc(35,Yt,2,1,"td",6),s.BQk(),s.ynx(36,16),s.YNc(37,Ct,2,0,"th",5),s.YNc(38,It,6,5,"td",6),s.BQk(),s.ynx(39,17),s.YNc(40,Jt,2,0,"th",5),s.YNc(41,Ft,5,0,"td",18),s.BQk(),s.YNc(42,St,1,0,"tr",19),s.YNc(43,Qt,1,0,"tr",20),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Q6J("dataSource",e.dataSource),s.xp6(37),s.Q6J("matHeaderRowDef",e.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",e.displayedColumns))},directives:[T.xw,T.yH,v.a8,v.dn,H.BZ,H.w1,H.fO,H.Dz,H.as,H.nj,H.ge,H.ev,H.XQ,H.Gk],pipes:[C.d,mt.l,o.H9],styles:[""]}),t})();var Ot=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Mt=(()=>{let t=class{constructor(t,e,i){this.recordsService=t,this.projectService=e,this.router=i,this.records=[],this.projectPiads=[]}ngOnInit(){this.router.params.subscribe(t=>{this.projectId=t.projectId,this.getProjectById(this.projectId),this.getProjectPaids(this.projectId)}),this.subscribtionProject=this.projectService.projectById$.pipe(x(this)).subscribe(t=>{this.project=t.project}),this.subscribtionRecords=this.recordsService.recordsByProject$.pipe(x(this)).subscribe(t=>{this.records=t.records})}getProjectById(t){this.projectService.getProjectById(t),this.recordsService.getAllRecordByProject(100,1,t)}getProjectPaids(t){return e=this,void 0,o=function*(){this.projectPiads=yield this.projectService.getProjectPaids(t)},new((i=void 0)||(i=Promise))(function(t,a){function n(t){try{r(o.next(t))}catch(e){a(e)}}function c(t){try{r(o.throw(t))}catch(e){a(e)}}function r(e){var o;e.done?t(e.value):(o=e.value,o instanceof i?o:new i(function(t){t(o)})).then(n,c)}r((o=o.apply(e,[])).next())});var e,i,o}AddPaids(t){this.projectService.addProjectPaids(t,this.projectId).subscribe(t=>{if(t)return this.getProjectPaids(this.projectId)})}UpdatePaids(t){const{data:e,id:i}=t;this.projectService.updatePaid(e,i).subscribe(t=>{if(t)return this.getProjectPaids(this.projectId)})}deletePaids(t){this.projectService.deletePaid(t).subscribe(t=>{if(t)return this.getProjectPaids(this.projectId)})}ngOnDestroy(){this.subscribtionRecords&&this.subscribtionRecords.unsubscribe(),this.subscribtionProject&&this.subscribtionProject.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.$),s.Y36(n.m),s.Y36(a.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-project"]],decls:13,vars:3,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"project"],[3,"projectPiads","AddPaidsEvent","UpdatePaidsEvent","DeletePaidsEvent"],[3,"recordsByProject"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"mat-card"),s.TgZ(3,"mat-card-content"),s.TgZ(4,"div",0),s.TgZ(5,"div",2),s._UZ(6,"app-project-details",3),s.qZA(),s.qZA(),s.TgZ(7,"div",0),s.TgZ(8,"div",2),s.TgZ(9,"app-paids-details",4),s.NdJ("AddPaidsEvent",function(t){return e.AddPaids(t)})("UpdatePaidsEvent",function(t){return e.UpdatePaids(t)})("DeletePaidsEvent",function(t){return e.deletePaids(t)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",0),s.TgZ(11,"div",2),s._UZ(12,"app-employee-worked-days",5),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(6),s.Q6J("project",e.project),s.xp6(3),s.Q6J("projectPiads",e.projectPiads),s.xp6(3),s.Q6J("recordsByProject",e.records))},directives:[T.xw,T.yH,v.a8,v.dn,F,pt,Ht],styles:[""]}),t=function(t,e,i,o){var a,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(c=(n<3?a(c):n>3?a(e,i,c):a(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c}([q({checkProperties:!0}),Ot("design:paramtypes",[c.$,n.m,a.gz])],t),t})();function Lt(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-dialog-content",5),s.TgZ(1,"form",6),s.TgZ(2,"div",7),s.TgZ(3,"div",8),s.TgZ(4,"div",9),s.TgZ(5,"mat-form-field"),s._UZ(6,"input",10),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",8),s.TgZ(8,"div",9),s.TgZ(9,"mat-form-field"),s._UZ(10,"input",11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"div",8),s.TgZ(12,"div",9),s.TgZ(13,"mat-form-field"),s._UZ(14,"input",12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",8),s.TgZ(16,"div",9),s.TgZ(17,"mat-form-field"),s._UZ(18,"input",13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"div",8),s.TgZ(20,"mat-form-field",14),s.TgZ(21,"mat-label"),s._uU(22,"Created At"),s.qZA(),s._UZ(23,"input",15),s._UZ(24,"mat-datepicker-toggle",16),s._UZ(25,"mat-datepicker",null,17),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"button",18),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(28),s.qZA(),s.TgZ(29,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(30,"Cancel"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.MAs(26),e=s.oxw();s.xp6(1),s.Q6J("formGroup",e.form),s.xp6(22),s.Q6J("matDatepicker",t),s.xp6(1),s.Q6J("for",t),s.xp6(3),s.Q6J("disabled",!e.form.valid),s.xp6(1),s.hij(" ",e.action," ")}}function Et(t,e){if(1&t&&(s.TgZ(0,"span",25),s._uU(1),s.qZA()),2&t){const t=s.oxw(2);s.xp6(1),s.Oqu(t.fileError)}}function Bt(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-dialog-content",5,2),s.TgZ(2,"form",6),s.TgZ(3,"div",20),s._uU(4," aggrement "),s._UZ(5,"img",21),s.TgZ(6,"button",22),s.TgZ(7,"input",23),s.NdJ("change",function(e){return s.CHM(t),s.oxw().onSelectFile(e)}),s.qZA(),s.qZA(),s.YNc(8,Et,2,1,"span",24),s.qZA(),s.TgZ(9,"div",7),s.TgZ(10,"div",8),s.TgZ(11,"div",9),s.TgZ(12,"mat-form-field"),s._UZ(13,"input",10),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",8),s.TgZ(15,"div",9),s.TgZ(16,"mat-form-field"),s._UZ(17,"input",11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",8),s.TgZ(19,"div",9),s.TgZ(20,"mat-form-field"),s._UZ(21,"input",12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"div",8),s.TgZ(23,"div",9),s.TgZ(24,"mat-form-field"),s._UZ(25,"input",13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(26,"div",8),s.TgZ(27,"mat-form-field",14),s.TgZ(28,"mat-label"),s._uU(29,"Created At"),s.qZA(),s._UZ(30,"input",15),s._UZ(31,"mat-datepicker-toggle",16),s._UZ(32,"mat-datepicker",null,17),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"button",18),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(35),s.qZA(),s.TgZ(36,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(37,"Cancel"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.MAs(33),e=s.oxw();s.xp6(2),s.Q6J("formGroup",e.form),s.xp6(3),s.Q6J("src",e.local_data.agreement,s.LSH),s.xp6(3),s.Q6J("ngIf",e.fileError),s.xp6(22),s.Q6J("matDatepicker",t),s.xp6(1),s.Q6J("for",t),s.xp6(3),s.Q6J("disabled",!e.form.valid),s.xp6(1),s.hij(" ",e.action," ")}}function Rt(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"p"),s._uU(1," Sure to delete "),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._uU(4," ? "),s.qZA(),s.TgZ(5,"div",26),s.TgZ(6,"button",27),s.NdJ("click",function(){return s.CHM(t),s.oxw().doAction()}),s._uU(7),s.qZA(),s.TgZ(8,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().closeDialog()}),s._uU(9,"Cancel"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(3),s.Oqu(t.local_data.projectName),s.xp6(4),s.hij(" ",t.action," ")}}let $t=(()=>{class t{constructor(t,e,i,o){this.formBuilder=t,this.datePipe=e,this.dialogRef=i,this.data=o,this.fileError="",this.isAdd=!1,this.isUpdate=!1,this.isDelete=!1,this.local_data=Object.assign({},o),this.action=this.local_data.action,this.local_data.agreement=void 0===this.local_data.agreement?"/assets/images/default-placeholder-150x150.png":j.x+"/"+this.local_data.agreement}ngOnInit(){"Add"===this.local_data.action?this.isAdd=!0:"Update"===this.local_data.action?this.isUpdate=!0:this.isDelete=!0,"Add"===this.local_data.action?this.initForm():this.initUpdateForm(),"Update"===this.local_data.action&&this.filForm()}initForm(){this.form=this.formBuilder.group({projectName:new w.NI("",{validators:[w.kI.required]}),clientFullName:new w.NI("",{validators:[w.kI.required]}),clientPhone:new w.NI("",{validators:[w.kI.required]}),location:new w.NI("",{validators:[w.kI.required]}),createdAt:new w.NI("",{validators:[w.kI.required]})})}initUpdateForm(){this.form=this.formBuilder.group({projectName:new w.NI("",{validators:[w.kI.required]}),clientFullName:new w.NI("",{validators:[w.kI.required]}),clientPhone:new w.NI("",{validators:[w.kI.required]}),location:new w.NI("",{validators:[w.kI.required]}),createdAt:new w.NI("",{validators:[w.kI.required]})})}filForm(){this.form.setValue({projectName:this.local_data.projectName,clientFullName:this.local_data.clientFullName,clientPhone:this.local_data.clientPhone,location:this.local_data.location,createdAt:new Date(this.local_data.createdAt).toISOString()})}doAction(){const{projectName:t,clientFullName:e,clientPhone:i,location:o,createdAt:a}=this.form.value,n={projectName:t,clientFullName:e,clientPhone:i,location:o,createdAt:O(a).format("YYYY-MM-DD HH:mm:ss")};this.form.invalids||this.dialogRef.close({event:this.action,data:n})}closeDialog(){this.dialogRef.close({event:"Cancel"})}onSelectFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=()=>{t.target.files[0].name.match(/.(jpg|jpeg|png|gif|pdf)$/i)?t.target.files[0].size>1572864||(this.imagePath=t.target.files[0],this.local_data.agreement=e.result):this.fileError="image should be JPG|JPEG|PNG|GIF|pdf"}}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(w.qu),s.Y36(o.uU),s.Y36(b.so),s.Y36(b.WI,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-projects-actions"]],decls:10,vars:2,consts:[["mat-dialog-title","",1,"font-medium"],[3,"ngTemplateOutlet"],["addTemplate",""],["updateTemplate",""],["deleteTemplate",""],[1,"pb-3"],[3,"formGroup"],["fxLayout","row wrap",1,"align-items-center"],["fxFlex","100","fxFlex.gt-md","50"],[1,"m-r-15","m-l-15"],["matInput","","type","text","name","projectName","formControlName","projectName","placeholder"," project  (required) *"],["matInput","","type","text","name","clientFullName","formControlName","clientFullName","placeholder"," clientFullName  (required) *"],["matInput","","type","text","name","clientPhone","formControlName","clientPhone","placeholder"," clientPhone  (required) *"],["matInput","","type","text","name","location","formControlName","location","placeholder"," location  (required) *"],["appearance","fill"],["matInput","","formControlName","createdAt",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["mat-button","","mat-flat-button","","color","warn",3,"disabled","click"],["mat-button","",3,"click"],[1,"d-flex","align-items-center","m-b-15"],[1,"mat-card-avatar",3,"src"],["mat-raised-button","","color","primary",1,"m-l-15","input-file-button"],["type","file",3,"change"],["class","bg-danger p-10 text-white",4,"ngIf"],[1,"bg-danger","p-10","text-white"],["mat-dialog-actions","","align","end",1,"pt-3"],["mat-button","","mat-flat-button","","color","warn",3,"click"]],template:function(t,e){if(1&t&&(s.TgZ(0,"h2",0),s.TgZ(1,"strong"),s._uU(2),s.qZA(),s.qZA(),s.GkF(3,1),s.YNc(4,Lt,31,5,"ng-template",null,2,s.W1O),s.YNc(6,Bt,38,7,"ng-template",null,3,s.W1O),s.YNc(8,Rt,10,2,"ng-template",null,4,s.W1O)),2&t){const t=s.MAs(5),i=s.MAs(7),o=s.MAs(9);s.xp6(2),s.Oqu(e.action),s.xp6(1),s.Q6J("ngTemplateOutlet",e.isAdd?t:e.isUpdate?i:o)}},directives:[b.uh,o.tP,b.xY,w._Y,w.JL,w.sg,T.xw,T.yH,N.KE,U.Nt,w.Fj,w.JJ,w.u,N.hX,M.hl,M.nW,N.R9,M.Mq,y.lW,o.O5,b.H8],styles:[""]}),t})();var Gt=i(2648);function Wt(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," # "),s.qZA())}function zt(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&t){const t=e.index;s.xp6(1),s.hij(" ",t+1," ")}}function Xt(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," project Name "),s.qZA())}const Vt=function(t){return["/projects",t]};function Kt(t,e){if(1&t&&(s.TgZ(0,"td",28),s.TgZ(1,"div",29),s.TgZ(2,"div",30),s.TgZ(3,"p",31),s._uU(4),s.qZA(),s.TgZ(5,"small"),s._uU(6),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Q6J("routerLink",s.VKq(3,Vt,t.id)),s.xp6(3),s.Oqu(t.clientFullName),s.xp6(2),s.Oqu(t.projectName)}}function te(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," phone "),s.qZA())}function ee(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t.clientPhone," ")}}function ie(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," location "),s.qZA())}function oe(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t.location," ")}}function ae(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1,"quotation "),s.qZA())}function ne(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.Dn7(2,1,t.quotation,"ILS","symbol")," ")}}function ce(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," paid "),s.qZA())}function re(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.Dn7(2,1,t.paid,"ILS","symbol")," ")}}function le(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," unPaid "),s.qZA())}function se(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.Dn7(2,1,t.quotation-t.paid,"ILS","symbol")," ")}}function de(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," haregem "),s.qZA())}function ue(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.Dn7(2,1,t.haregem,"ILS","symbol")," ")}}function pe(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," agreement "),s.qZA())}function me(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"td",28),s.TgZ(1,"img",32),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).openAgreement(e)}),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,i=s.oxw(2);s.xp6(1),s.Q6J("src",i.imgPath+"/"+t.agreement,s.LSH)}}function ge(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," createdAt "),s.qZA())}function fe(t,e){if(1&t&&(s.TgZ(0,"td",28),s._uU(1),s.ALo(2,"momentPipe"),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",s.xi3(2,1,t.createdAt,"YYYY-MM-DD")," ")}}function Ze(t,e){1&t&&(s.TgZ(0,"th",27),s._uU(1," Action "),s.qZA())}function he(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"td",33),s.TgZ(1,"a",34),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).openDialog("Update",e)}),s._UZ(2,"i",35),s.qZA(),s.TgZ(3,"a",34),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).openDialog("Delete",e)}),s._UZ(4,"i",36),s.qZA(),s.qZA()}}function Ae(t,e){1&t&&s._UZ(0,"tr",37)}function qe(t,e){1&t&&s._UZ(0,"tr",38)}function xe(t,e){if(1&t&&(s.TgZ(0,"table",10),s.ynx(1,11),s.YNc(2,Wt,2,0,"th",12),s.YNc(3,zt,2,1,"td",13),s.BQk(),s.ynx(4,14),s.YNc(5,Xt,2,0,"th",12),s.YNc(6,Kt,7,5,"td",13),s.BQk(),s.ynx(7,15),s.YNc(8,te,2,0,"th",12),s.YNc(9,ee,2,1,"td",13),s.BQk(),s.ynx(10,16),s.YNc(11,ie,2,0,"th",12),s.YNc(12,oe,2,1,"td",13),s.BQk(),s.ynx(13,17),s.YNc(14,ae,2,0,"th",12),s.YNc(15,ne,3,5,"td",13),s.BQk(),s.ynx(16,18),s.YNc(17,ce,2,0,"th",12),s.YNc(18,re,3,5,"td",13),s.BQk(),s.ynx(19,19),s.YNc(20,le,2,0,"th",12),s.YNc(21,se,3,5,"td",13),s.BQk(),s.ynx(22,20),s.YNc(23,de,2,0,"th",12),s.YNc(24,ue,3,5,"td",13),s.BQk(),s.ynx(25,21),s.YNc(26,pe,2,0,"th",12),s.YNc(27,me,2,1,"td",13),s.BQk(),s.ynx(28,22),s.YNc(29,ge,2,0,"th",12),s.YNc(30,fe,3,4,"td",13),s.BQk(),s.ynx(31,23),s.YNc(32,Ze,2,0,"th",12),s.YNc(33,he,5,0,"td",24),s.BQk(),s.YNc(34,Ae,1,0,"tr",25),s.YNc(35,qe,1,0,"tr",26),s.qZA()),2&t){const t=s.oxw();s.Q6J("dataSource",t.dataSourceProjects),s.xp6(34),s.Q6J("matHeaderRowDef",t.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",t.displayedColumns)}}function Te(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-paginator",39),s.NdJ("page",function(e){return s.CHM(t),s.oxw().onChangedPage(e)}),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("length",t.totalProjects)("pageSize",t.projectPerPage)("pageSizeOptions",t.pageSizeOptions)}}const ve=[{path:"",component:(()=>{class t{constructor(t,e){this._projectServices=t,this.dialog=e,this.projects=[],this.projectPerPage=25,this.currentPage=1,this.pageSizeOptions=[50,100],this.totalProjects=0,this.imgPath=j.x,this.projectTitle="",this.paginator=Object.create(null),this.sort=Object.create(null),this.displayedColumns=["id","clientFullName","clientPhone","location","quotation","paid","unPaid","haregem","agreement","createdAt","action"],this.dataSourceProjects=new H.by(this.projects)}ngOnInit(){this._projectServices.projects$.subscribe(t=>{this.projects=t.projects,this.totalProjects=t.totalProjects,this.dataSourceProjects=new H.by(this.projects)}),this._projectServices.getAllProjects(this.projectPerPage,this.currentPage)}onChangedPage(t){this.currentPage=t.pageIndex+1,this.projectPerPage=t.pageSize,this._projectServices.getAllProjects(this.projectPerPage,this.currentPage),this.subProject$=this._projectServices.projects$.subscribe(t=>{this.projects=t.projects,this.dataSourceProjects=new H.by(this.projects)})}onToggleDropdown(){this.multiSelect.toggleDropdown()}applyFilter(t){this._projectServices.getAllProjects(this.projectPerPage,this.currentPage,t)}openDialog(t,e){e.action=t,this.dialog.open($t,{data:e,disableClose:!0}).afterClosed().subscribe(t=>{void 0!==t&&("Add"===t.event?this._projectServices.addProject(t.data).subscribe(t=>{t&&this._projectServices.getAllProjects(this.projectPerPage,this.currentPage)}):"Update"===t.event?this._projectServices.updateProject(t.data,e.id).subscribe(t=>{t&&this._projectServices.getAllProjects(this.projectPerPage,this.currentPage)}):"Delete"===t.event&&this._projectServices.deleteProject(e.id).subscribe(t=>{t&&this._projectServices.getAllProjects(this.projectPerPage,this.currentPage)}))})}openAgreement(t){this.dialog.open(_,{data:t,disableClose:!0}).afterClosed().subscribe(t=>{})}timeAgo(t){return O(t).fromNow()}ngOnDestroy(){this.subProject$&&this.subProject$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(n.m),s.Y36(b.uw))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-projects"]],viewQuery:function(t,e){if(1&t&&(s.Gf(Gt.zi,5),s.Gf(S.NW,7),s.Gf(Q.YE,7)),2&t){let t;s.iGM(t=s.CRH())&&(e.multiSelect=t.first),s.iGM(t=s.CRH())&&(e.paginator=t.first),s.iGM(t=s.CRH())&&(e.sort=t.first)}},decls:18,vars:2,consts:[["fxLayout","row wrap"],["fxFlex","100"],["fxLayout","row wrap",1,"align-items-center"],["fxFlex.gt-md","25","fxFlex.gt-lg","25","fxFlex","100"],["matInput","","placeholder","Search Project",3,"keyup"],["fxFlex.gt-md","75",1,"text-right"],["mat-raised-button","","color","primary",3,"click"],[1,"table-responsive"],["mat-table","","class","table employee-list no-wrap",3,"dataSource",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["mat-table","",1,"table","employee-list","no-wrap",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","clientFullName","sticky",""],["matColumnDef","clientPhone"],["matColumnDef","location"],["matColumnDef","quotation"],["matColumnDef","paid"],["matColumnDef","unPaid"],["matColumnDef","haregem"],["matColumnDef","agreement"],["matColumnDef","createdAt"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex",3,"routerLink"],[1,"m-l-15"],[1,"font-bold","m-b-0","m-t-0"],[1,"mat-card-avatar",3,"src","click"],["mat-cell","",1,"action-link"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash","text-danger"],["mat-header-row",""],["mat-row",""],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"mat-card"),s.TgZ(3,"mat-card-content"),s.TgZ(4,"div",2),s.TgZ(5,"div",3),s.TgZ(6,"mat-form-field"),s.TgZ(7,"input",4),s.NdJ("keyup",function(t){return e.applyFilter(t.target.value)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"div",5),s.TgZ(9,"button",6),s.NdJ("click",function(){return e.openDialog("Add",{})}),s._uU(10,"Add Project"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"div",0),s.TgZ(12,"div",1),s.TgZ(13,"mat-card"),s.TgZ(14,"mat-card-content"),s.TgZ(15,"div",7),s.YNc(16,xe,36,3,"table",8),s.YNc(17,Te,1,3,"mat-paginator",9),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(16),s.Q6J("ngIf",e.dataSourceProjects),s.xp6(1),s.Q6J("ngIf",e.projects.length>0))},directives:[T.xw,T.yH,v.a8,v.dn,N.KE,U.Nt,y.lW,o.O5,H.BZ,H.w1,H.fO,H.Dz,H.as,H.nj,H.ge,H.ev,a.rH,H.XQ,H.Gk,S.NW],pipes:[o.H9,C.d],styles:[""]}),t})(),data:{title:"\u05e4\u05e8\u05d5\u05d9\u05d9\u05e7\u05d8\u05d9\u05dd",urls:[{title:"\u05dc\u05d5\u05d7 \u05d4\u05d1\u05e7\u05e8\u05d4",url:"/dashboard"},{title:"\u05e4\u05e8\u05d5\u05d9\u05e7\u05d8\u05d9\u05dd"}]}},{path:":projectId",component:Mt}];let je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.Bz.forChild(ve)],a.Bz]}),t})();var be=i(5174),ye=i(3490);let _e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[o.uU,n.m,{provide:E.Ad,useValue:"en-GB"}],imports:[[o.ez,je,be.m,ye.wn,ye.I$]]}),t})()}}]);